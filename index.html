<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="styles/main.css" />

    <title>Quantum Mau-Mau</title>
    <script type="module" src="src\components\Card.js"></script>
    <script type="module" src="src\components\QuantumOperationCard.js"></script>
    <script type="module" src="src\components\QuantumDestroyOperationCard.js"></script>
    <script type="module" src="src\components\MeasurementCard.js"></script>
    <script type="module" src="src\components\Hand.js"></script>
    <script type="module" src="src\util\AssetFinder.js"></script>
    <script>
      function drag(ev) {
        cardType = ev.target.classList[1]
        console.log("Picked up card")
        console.log("Card Type: "+cardType)
        ev.dataTransfer.setData("cardType", cardType)
        if(cardType !== "measure") {
          gateType = ev.target.children[2].innerText
          console.log("Gate Type: "+gateType)
          ev.dataTransfer.setData("gateType", gateType)
        }
      }
      function allowDrop(ev) {
        ev.preventDefault();
      }
      function drop(ev) {
        ev.preventDefault();
        var cardType = ev.dataTransfer.getData("cardType");
        if (cardType === "measure") {
          console.log("Measurement Card Dropped. Measuring circuit after turn")
        } else {
          qubitNumber = ev.target.id
          gateType = ev.dataTransfer.getData("gateType")
          console.log(cardType + " " + gateType + " dropped on " + qubitNumber)
        }
      }


    </script>
    <script type="module">
      // import QuantumOperationCard from "./src/components/QuantumOperationCard.js";
      // var card = new QuantumOperationCard("hadamard", null)
      // console.log(card.getHTML())
      // document.getElementById("player-cards").innerHTML = document.getElementById("player-cards").innerHTML + card.getHTML()
      // import Hand
      import Hand from "./src/components/Hand.js"
      import QuantumOperationCard from "./src/components/QuantumOperationCard.js"
      import QuantumDestroyOperationCard from "./src/components/QuantumDestroyOperationCard.js"
      import MeasurementCard from "./src/components/MeasurementCard.js"
      
      const cards = [
        new QuantumOperationCard("hadamard"), 
        new QuantumDestroyOperationCard("cnot"), 
        new QuantumOperationCard("cnot"), 
        new QuantumOperationCard("pauli-x"), 
        new QuantumOperationCard("pauli-y"), 
        new QuantumOperationCard("pauli-z"), 
        new QuantumDestroyOperationCard("pauli-y"), 
        new MeasurementCard(),
        new QuantumDestroyOperationCard("hadamard"), 
        new QuantumDestroyOperationCard("pauli-x"), 
        new QuantumDestroyOperationCard("pauli-z"), 
      ]; 
      var hand = new Hand(cards)
      hand.render()
    </script>
  </head>
  <body>
    <div class="game-screen-container">
      <div class="draw-pile">
        <div class="card card-in-pile">
          <div>Draw Pile</div>
        </div>
      </div>
      <div class="info-container">
        <div class="scoreboard">
          <b>Scoreboard</b>
          <div class="player-info-container">
            <div id="player1-info"  class="player-info">
              <b>Player 1</b><br>
              6 Cards
            </div>
            <div id="player2-info"  class="player-info current-turn">
              <b>Player 2</b><br>
              7 Cards
            </div>
            <div id="player3-info"  class="player-info">
              <b>Player 3</b><br>
              7 Cards
            </div>
            <div id="player4-info"  class="player-info">
              <b>Bot 4</b><br>
              7 Cards
            </div>
          </div>
        </div>
        <button class="restart-game-btn">Restart Game</button>
      </div>
      <div class="player-hand">
        <div id="player-cards">
          <div class="card measure" draggable="true" ondragstart="drag(event)">
            <div class="card-title">Measure</div>
            <img src="assets/measure.png" class="card-symbol" />
            <div class="card-description">End Round</div>
          </div>
          <div class="card gate" draggable="true" ondragstart="drag(event)">
            <div class="card-title">Gate</div>
            <img src="assets/hadamard-gate.png" class="card-symbol" />
            <div class="card-description">Hadamard</div>
          </div>
          <div class="card destroy" draggable="true" ondragstart="drag(event)">
            <div class="card-title">Destroy</div>
            <img src="assets/hadamard-gate.png" class="card-symbol" />
            <div class="card-description">Hadamard</div>
          </div>
          <div class="card gate" draggable="true" ondragstart="drag(event)">
            <div class="card-title">Gate</div>
            <img src="assets/cnot-gate.png" class="card-symbol" />
            <div class="card-description">CNOT</div>
          </div>
          <div class="card destroy" draggable="true" ondragstart="drag(event)">
            <div class="card-title">Destroy</div>
            <img src="assets/cnot-gate.png" class="card-symbol" />
            <div class="card-description">CNOT</div>
          </div>
          <div class="card gate" draggable="true" ondragstart="drag(event)">
            <div class="card-title">Gate</div>
            <img src="assets/x-gate.png" class="card-symbol" />
            <div class="card-description">Pauli-X</div>
          </div>
          <div class="card destroy" draggable="true" ondragstart="drag(event)">
            <div class="card-title">Destroy</div>
            <img src="assets/x-gate.png" class="card-symbol" />
            <div class="card-description">Pauli-X</div>
          </div>
          <div class="card gate" draggable="true" ondragstart="drag(event)">
            <div class="card-title">Gate</div>
            <img src="assets/y-gate.png" class="card-symbol" />
            <div class="card-description">Pauli-Y</div>
          </div>
          <div class="card destroy" draggable="true" ondragstart="drag(event)">
            <div class="card-title">Destroy</div>
            <img src="assets/y-gate.png" class="card-symbol" />
            <div class="card-description">Pauli-Y</div>
          </div>
          <div class="card gate" draggable="true" ondragstart="drag(event)">
            <div class="card-title">Gate</div>
            <img src="assets/z-gate.png" class="card-symbol" />
            <div class="card-description">Pauli-Z</div>
          </div>
          <div class="card destroy" draggable="true" ondragstart="drag(event)">
            <div class="card-title">Destroy</div>
            <img src="assets/z-gate.png" class="card-symbol" />
            <div class="card-description">Pauli-Z</div>
          </div>

        </div>
        <button>Confirm Turn</button>
      </div>
      <div class="circuit">
        <img class="circuit-img" src="assets/circuit-all-gates.png">
          <div class="circuit-mask">
            <div id="q0" class="qubit" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
            <div id="q1" class="qubit" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
            <div id="q2" class="qubit" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
            <div id="q3" class="qubit" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
          </div>
        </img>
      </div>
    </div>
  </body>
</html>
